---
import { Icon } from 'astro-icon/components';
import { iconMap } from '@/utils/icon-map';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import type { FutureNewsConfig } from '@/types/future-news-config';

type Props = {
  futureNewsConfig: FutureNewsConfig;
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const { futureNewsConfig } = Astro.props;

const themeColors: Record<string, string[]> = {
  slate:   ['text-slate-700 dark:text-slate-300',   'border-slate-500/40',   'shadow-slate-500/30', 'bg-slate-500'],
  indigo:  ['text-indigo-700 dark:text-indigo-300', 'border-indigo-500/40',  'shadow-indigo-500/30', 'bg-indigo-500'],
  purple:  ['text-purple-700 dark:text-purple-300', 'border-purple-500/40',  'shadow-purple-500/30', 'bg-purple-500'],
  emerald: ['text-emerald-700 dark:text-emerald-300', 'border-emerald-500/40', 'shadow-emerald-500/30', 'bg-emerald-500'],
};
---

<section class="py-24 bg-transparent transition-colors duration-500">
  <div class="max-w-6xl mx-auto px-6">
    
    <div class="mb-20 text-center">
      <h2 class="text-4xl md:text-6xl font-black text-zinc-900 dark:text-white mb-4 tracking-tighter">
        {t(futureNewsConfig.title)}
      </h2>
      <p class="text-zinc-600 dark:text-zinc-400 text-lg max-w-2xl mx-auto">
        {t(futureNewsConfig.subtitle)}
      </p>
    </div>

    <div class="relative space-y-16">
      <div class="absolute left-4 md:left-[220px] top-4 bottom-4 w-0.5 bg-zinc-300 dark:bg-zinc-700 z-0"></div>

      {futureNewsConfig.items.map((item) => {
        const [txt, bdr, shd, dotBg] = themeColors[item.color] || themeColors.purple;

        return (
          <div class="group relative flex flex-col md:flex-row gap-16 z-10">
            
            <div class="flex items-center md:items-start md:min-w-[220px] md:pt-8 relative">
              <span class={`hidden md:block text-[10px] font-black uppercase tracking-[0.25em] text-right w-full pr-16 transition-colors ${txt}`}>
                {t(item.label)}
              </span>
              
              <div class={`absolute left-3 md:left-[215px] w-3 h-3 rounded-full border-2 border-white dark:border-black shadow-[0_0_0_4px_rgba(255,255,255,1)] dark:shadow-[0_0_0_4px_rgba(0,0,0,1)] z-20 transition-all duration-500 group-hover:scale-[1.8] ${dotBg}`}></div>
            </div>

            <div class="flex-1 relative">
              <div class="group-hover:-translate-y-2 transition-all duration-500 p-8 rounded-[2.5rem] border-2 border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-900/60 shadow-[0_4px_20px_-5px_rgba(0,0,0,0.05)] dark:shadow-none overflow-hidden backdrop-blur-md">
                
                <div class="flex items-center gap-3 mb-6 md:hidden">
                  <span class={`px-3 py-1 rounded-full bg-zinc-100 dark:bg-white/5 text-[10px] font-black uppercase tracking-widest ${txt}`}>
                    {t(item.label)}
                  </span>
                </div>
                
                <div class="flex items-start justify-between gap-6">
                  <div class="space-y-3">
                    <h3 class="text-2xl md:text-3xl font-black text-zinc-900 dark:text-white tracking-tight">
                      {t(item.title)}
                    </h3>
                    <p class="text-zinc-600 dark:text-zinc-400 leading-relaxed text-base md:text-lg">
                      {t(item.description)}
                    </p>
                  </div>
                  
                  <div class={`shrink-0 p-4 rounded-2xl bg-zinc-100 dark:bg-white/10 border-2 border-zinc-200 dark:border-white/10 ${txt} transition-all duration-500 group-hover:bg-white dark:group-hover:bg-zinc-800 group-hover:rotate-6 shadow-sm`}>
                    <Icon name={iconMap[item.icon as keyof typeof iconMap]} class="w-7 h-7" />
                  </div>
                </div>

                <div class={`absolute inset-0 rounded-[2.5rem] opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-500 border-2 ${bdr} shadow-[0_0_50px_-12px] ${shd}`}></div>
              </div>
            </div>
          </div>
        );
      })}
    </div>
  </div>
</section>