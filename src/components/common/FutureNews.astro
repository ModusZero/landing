---
import { Icon } from 'astro-icon/components';
import { iconMap } from '@/utils/icon-map';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import type { FutureNewsConfig } from '@/types/future-news-config';

type Props = {
  futureNewsConfig: FutureNewsConfig;
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const { futureNewsConfig } = Astro.props;

const themeColors: Record<string, string[]> = {
  slate:   ['text-slate-700 dark:text-slate-300',   'border-slate-500/40',   'shadow-slate-500/30', 'bg-slate-500'],
  indigo:  ['text-indigo-700 dark:text-indigo-300', 'border-indigo-500/40',  'shadow-indigo-500/30', 'bg-indigo-500'],
  purple:  ['text-purple-700 dark:text-purple-300', 'border-purple-500/40',  'shadow-purple-500/30', 'bg-purple-500'],
  emerald: ['text-emerald-700 dark:text-emerald-300', 'border-emerald-500/40', 'shadow-emerald-500/30', 'bg-emerald-500'],
};
---

<section class="py-24 bg-transparent overflow-hidden">
  <div class="max-w-6xl mx-auto px-6">
    
    <div class="mb-20 text-center">
      <h2 class="text-4xl md:text-6xl font-black mb-4 tracking-tighter text-glow uppercase">
        {t(futureNewsConfig.title)}
      </h2>
      <p class="opacity-70 text-lg max-w-2xl mx-auto">
        {t(futureNewsConfig.subtitle)}
      </p>
    </div>

    <div class="relative">
      <div class="absolute left-4 md:left-[220px] top-4 bottom-4 w-0.5 bg-zinc-300 dark:bg-zinc-800 z-0"></div>

      <div class="space-y-12">
        {futureNewsConfig.items.map((item) => {
          const [txt, bdr, shd, dotBg] = themeColors[item.color] || themeColors.purple;

          return (
            <div class="group relative flex flex-col md:flex-row gap-6 md:gap-16 z-10">
              
              <div class="flex items-center md:items-start md:min-w-[220px] md:pt-8 relative pl-10 md:pl-0">
                <span class={`hidden md:block text-[10px] font-black uppercase tracking-[0.25em] text-right w-full pr-16 transition-colors ${txt}`}>
                  {t(item.label)}
                </span>
                
                <div class={`absolute left-3 md:left-[215px] w-3 h-3 rounded-full border-2 border-white dark:border-black shadow-[0_0_0_4px_rgba(0,0,0,0.1)] z-20 ${dotBg}`}></div>
              </div>

              <div class="flex-1 relative target-cursor pl-10 md:pl-0">
                <div class="cursor-target group-hover:-translate-y-2 transition-all duration-500 p-6 md:p-8 rounded-3xl md:rounded-[2.5rem] border-2 border-border-main bg-white/5 backdrop-blur-md overflow-hidden shadow-xl">
                  
                  <div class="flex items-center gap-3 mb-4 md:hidden">
                    <span class={`px-3 py-1 rounded-full bg-white/10 text-[9px] font-black uppercase tracking-widest ${txt}`}>
                      {t(item.label)}
                    </span>
                  </div>
                  
                  <div class="flex items-start justify-between gap-4">
                    <div class="space-y-2">
                      <h3 class="text-xl md:text-3xl font-black tracking-tight uppercase">
                        {t(item.title)}
                      </h3>
                      <p class="opacity-70 leading-relaxed text-sm md:text-lg">
                        {t(item.description)}
                      </p>
                    </div>
                    <div class={`shrink-0 p-3 md:p-4 rounded-xl md:rounded-2xl bg-white/10 border border-white/10 ${txt}`}>
                      <Icon name={iconMap[item.icon as keyof typeof iconMap]} class="w-5 h-5 md:w-7 md:h-7" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          );
        })}
      </div>
    </div>
  </div>
</section>