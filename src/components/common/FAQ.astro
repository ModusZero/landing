---
import type { FAQConfig } from '@/types/faq-config';
import AnimatedList from '@/components/islands/AnimatedList';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';

type Props = {
  faqConfig: FAQConfig;
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const { faqConfig } = Astro.props;

// Formateamos los items para que se vean bien en la lista
const faqItems = faqConfig.items.map(item => `${t(item.question)} — ${t(item.answer)}`);
---

<section id="faq" class="relative bg-app text-main px-4 py-20 sm:px-6 lg:px-8 border-t border-main/20">
  <div class="mx-auto max-w-5xl">
    <div class="scroll-fade-up mb-16 text-center">
      <h2 class="text-main mb-4 text-4xl font-bold sm:text-5xl tracking-tight">
        {t(faqConfig.title)}
      </h2>
      <p class="opacity-70 text-xl max-w-2xl mx-auto">
        {t(faqConfig.subtitle)}
      </p>
    </div>

    <div class="w-full flex justify-center">
      <AnimatedList 
        client:visible 
        items={faqItems} 
        showGradients={true} 
        displayScrollbar={false} 
        className="max-w-3xl"
        itemClassName="shadow-sm" 
      />
    </div>
  </div>
</section>

<style is:global>
  /* Aseguramos que el contenedor de la lista no tenga scrollbars molestos en móviles */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
</style>