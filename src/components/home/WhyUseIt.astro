---
import { iconMap } from '@/utils/icon-map';
import { type IconName } from '@/types/icon-name';
import { Icon } from 'astro-icon/components';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const whyUseItPrefix = "home.why_use_it";
const featurePrefix = `${whyUseItPrefix}.features`;

const whyUseItConfig = {
  title: `${whyUseItPrefix}.title`,
  subtitle: `${whyUseItPrefix}.subtitle`,
  reasons: [
    { 
      title: `${featurePrefix}.offline.title`, 
      description: `${featurePrefix}.offline.description`, 
      icon: "signal-slash" 
    },
    { 
      title: `${featurePrefix}.paradigm.title`, 
      description: `${featurePrefix}.paradigm.description`, 
      icon: "shield-check" 
    },
    { 
      title: `${featurePrefix}.no_prompt.title`, 
      description: `${featurePrefix}.no_prompt.description`, 
      icon: "zap" 
    },
    { 
      title: `${featurePrefix}.token_strategy.title`, 
      description: `${featurePrefix}.token_strategy.description`, 
      icon: "currency-dollar" 
    },
    { 
      title: `${featurePrefix}.mcp_native.title`, 
      description: `${featurePrefix}.mcp_native.description`, 
      icon: "puzzle-piece" 
    },
    { 
      title: `${featurePrefix}.visual_codebase.title`, 
      description: `${featurePrefix}.visual_codebase.description`, 
      icon: "squares-plus"
    }
  ] as { title: string; description: string; icon: IconName; }[]
};
---

<section class="relative border-y border-mono-lighter dark:border-mono-dark bg-transparent py-24 px-4 sm:px-6 lg:px-8">
  <div class="mx-auto max-w-7xl">
    <div class="text-center mb-16 scroll-fade-up">
      <h2 class="text-4xl font-bold sm:text-5xl mb-4 text-mono-black dark:text-white">
        {t(whyUseItConfig.title)}
      </h2>
      <p class="text-xl text-mono-gray-dark dark:text-mono-lighter max-w-2xl mx-auto">
        {t(whyUseItConfig.subtitle)}
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
      {whyUseItConfig.reasons.map((reason) => (
        <div class="cursor-target group flex flex-col items-center text-center p-6 rounded-2xl border border-transparent hover:border-mono-lighter dark:hover:border-mono-dark transition-all duration-300">
          <div class="mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-mono-black dark:bg-white text-white dark:text-mono-black transition-colors">
            <Icon name={iconMap[reason.icon]} class="h-8 w-8" />
          </div>
          <h3 class="text-2xl font-bold mb-3 text-mono-black dark:text-white">
            {t(reason.title)}
          </h3>
          <p class="text-mono-gray-dark dark:text-mono-lighter leading-relaxed">
            {t(reason.description)}
          </p>
        </div>
      ))}
    </div>
  </div>
</section>